add_library(lrouse STATIC "${CMAKE_CURRENT_LIST_DIR}/lrouse.c")
set_c11_standard(lrouse)
target_compile_options(lrouse PRIVATE ${rouse_warnings})
target_link_libraries(lrouse PUBLIC rouse_lua)
add_asan_if_available(lrouse)
add_clang_tidy_if_available(lrouse)

add_executable(lrouse_exe "${CMAKE_CURRENT_LIST_DIR}/main.c")
set_c11_standard(lrouse_exe)
target_compile_options(lrouse_exe PRIVATE ${rouse_warnings})
target_link_libraries(lrouse_exe PUBLIC lrouse)
add_asan_if_available(lrouse_exe)
add_clang_tidy_if_available(lrouse_exe)
set_target_properties(lrouse_exe PROPERTIES OUTPUT_NAME "lrouse")

if(ROUSE_EMSCRIPTEN)
    target_compile_options(lrouse_exe PRIVATE "-sFETCH=1")
    target_link_options(   lrouse_exe PRIVATE "-sFETCH=1")
    set_property(TARGET lrouse_exe PROPERTY SUFFIX ".html")
endif()
